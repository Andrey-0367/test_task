(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{377:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var a=r(5155),i=r(5695),s=r(2115),o=r(1471),c=r(9117),n=r.n(c);function p(e){let{id:t}=e,r=(0,i.useRouter)(),c=(0,i.useParams)(),[p,d]=(0,s.useState)(null),{data:u,isLoading:g,isError:m}=(0,o.hi)(Number(c.id));return((0,s.useEffect)(()=>{let e=sessionStorage.getItem("product_".concat(c.id));if(e)try{let t=JSON.parse(e);d(t);return}catch(e){console.error("Error parsing product from sessionStorage",e)}if(u)return void d(u);g||u||d(null)},[c.id,u,g]),g)?(0,a.jsx)("div",{className:n().loading,children:"Загрузка..."}):p?m?(0,a.jsx)("div",{className:n().error,children:"Ошибка загрузки"}):(0,a.jsxs)("div",{className:n().container,children:[(0,a.jsx)("button",{onClick:()=>{r.push("/products")},className:n().backButton,children:"← Вернуться к продуктам"}),(0,a.jsxs)("div",{className:n().productContainer,children:[(0,a.jsx)("div",{className:n().imageContainer,children:(0,a.jsx)("img",{src:p.image,alt:p.title,className:n().productImage})}),(0,a.jsxs)("div",{className:n().productInfo,children:[(0,a.jsx)("h1",{children:p.title}),(0,a.jsxs)("p",{className:n().price,children:["$",p.price]}),(0,a.jsx)("p",{className:n().description,children:p.description})]})]})]}):(0,a.jsx)("div",{className:n().error,children:"Товар не найден"})}},1471:(e,t,r)=>{"use strict";r.d(t,{Kc:()=>o,ZN:()=>s,hi:()=>c});var a=r(404),i=r(4317);let s=(0,a.xP)({reducerPath:"productsApi",baseQuery:(0,i.cw)({baseUrl:"https://fakestoreapi.com/",prepareHeaders:e=>(e.set("Content-Type","application/json"),e)}),tagTypes:["Product"],endpoints:e=>({getProducts:e.query({query:()=>"/products",transformResponse:e=>e.map(e=>({...e,price:String(e.price),image:e.image.startsWith("http")?e.image:"https://fakestoreapi.com".concat(e.image.startsWith("/")?"":"/").concat(e.image),rating:e.rating||{rate:0,count:0}})),providesTags:e=>e?[...e.map(e=>{let{id:t}=e;return{type:"Product",id:t}}),{type:"Product",id:"LIST"}]:[{type:"Product",id:"LIST"}]}),getProductById:e.query({query:e=>"/products/".concat(e),transformResponse:e=>({...e,price:String(e.price),image:e.image.startsWith("http")?e.image:"https://fakestoreapi.com".concat(e.image.startsWith("/")?"":"/").concat(e.image),rating:e.rating||{rate:0,count:0}}),providesTags:(e,t,r)=>[{type:"Product",id:r}]}),addProduct:e.mutation({query:e=>({url:"/products",method:"POST",body:e}),transformResponse:e=>({...e,price:String(e.price),image:e.image.startsWith("http")?e.image:"https://fakestoreapi.com".concat(e.image.startsWith("/")?"":"/").concat(e.image)}),invalidatesTags:[{type:"Product",id:"LIST"}]}),updateProduct:e.mutation({query:e=>({url:"/products/".concat(e.id),method:"PUT",body:{...e,price:Number(e.price)}}),transformResponse:e=>({...e,price:String(e.price),image:e.image.startsWith("http")?e.image:"https://fakestoreapi.com".concat(e.image.startsWith("/")?"":"/").concat(e.image)}),invalidatesTags:(e,t,r)=>[{type:"Product",id:r.id},{type:"Product",id:"LIST"}]}),deleteProduct:e.mutation({query:e=>({url:"/products/".concat(e),method:"DELETE"}),invalidatesTags:(e,t,r)=>[{type:"Product",id:r},{type:"Product",id:"LIST"}]})})}),{useGetProductsQuery:o,useGetProductByIdQuery:c,useAddProductMutation:n,useUpdateProductMutation:p,useDeleteProductMutation:d}=s},5579:(e,t,r)=>{Promise.resolve().then(r.bind(r,377))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},9117:e=>{e.exports={container:"page_container__dGRlk",backButton:"page_backButton__DiIwN",productContainer:"page_productContainer__Cr2Zn",imageContainer:"page_imageContainer__WXFJ_",productImage:"page_productImage__94oRW",productInfo:"page_productInfo__0IYV3",price:"page_price__oSPAQ",category:"page_category__yYgby",description:"page_description__4P3mR",rating:"page_rating__yQWt4",loading:"page_loading__cqxwt",error:"page_error__pgR2T",notFound:"page_notFound__oVnI5"}}},e=>{var t=t=>e(e.s=t);e.O(0,[682,404,441,684,358],()=>t(5579)),_N_E=e.O()}]);