(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{1627:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var i=r(5155),a=r(5695),n=r(4540),s=r(6037),l=r.n(s),c=r(9007),o=r(2115),u=r(558);function d(){let e=(0,a.useRouter)(),t=(0,n.wA)(),[r,s]=(0,o.useState)([]),[d,p]=(0,o.useState)(!1),g=(0,o.useRef)(null),_=async(r,i)=>{p(!0);try{var a,n;if(!i)return void alert("Please select an image");if(!r.title.trim()||!r.price)return void alert("Title and price are required");let s={title:r.title.trim(),price:parseFloat(r.price),description:(null==(a=r.description)?void 0:a.trim())||"",category:(null==(n=r.newCategory)?void 0:n.trim())||r.category||"other",image:URL.createObjectURL(i),rating:{rate:0,count:0}};t((0,u.Bj)(s)),g.current&&(g.current.value=""),e.push("/products?refresh="+Date.now())}catch(e){console.error("Product creation failed:",e),alert("Failed to create product. Please try again.")}finally{p(!1)}};return(0,i.jsxs)("div",{className:l().container,children:[(0,i.jsx)("h1",{className:l().title,children:"Create New Product"}),(0,i.jsx)(c.i,{onSubmit:_,isSubmitting:d,existingCategories:r,setExistingCategories:s,fileInputRef:g})]})}},4670:(e,t,r)=>{Promise.resolve().then(r.bind(r,1627))},6037:e=>{e.exports={container:"page_container__Zyscq",title:"page_title__v_TSL"}}},e=>{var t=t=>e(e.s=t);e.O(0,[657,404,243,360,441,684,358],()=>t(4670)),_N_E=e.O()}]);